{% extends "base.html" %}

{% load static %}

{% block title %}
    <title>CAPIBARA - Cocina</title>
{% endblock title %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/productos.css' %}">
{% endblock style %}

{% block nav-activate %}
<li class="nav-item">
    <a class="nav-link" aria-current="page" href="/home"><svg xmlns="http://www.w3.org/2000/svg"
            width="25" height="25" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
            <path
                d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z" />
            <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z" />
        </svg> Home</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/contacto">Nosotros</a>
</li>
<li class="nav-item">
    <a class="nav-link active" disabled>Productos</a>
</li>
<li class="nav-item">
    <a class="nav-link" id="cartLink" href="{% url 'carrito' %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
            class="bi bi-cart-fill" viewBox="0 0 16 16">
            <path
                d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
        </svg>
        <span class="badge cart-counter">{{ carrito_count }}</span>
    </a>
</li>

<li class="nav-item dropdown">
    {% if user.is_authenticated %} 
        <a class="nav-link dropdown" role="button"data-bs-toggle="dropdown" aria-expanded="false"><svg xmlns="http://www.w3.org/2000/svg" width="30"
            height="30" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />
        </svg>{{user.username}}</a>
        {% else %} 
            <a class="nav-link" href="acceso"><svg xmlns="http://www.w3.org/2000/svg" width="30"
                    height="30" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />
                </svg>
            </a>
        {% endif %} 
        <ul id="dropNavbar" class="text dropdown-menu">
            <form method="post" action="{% url 'perfil' %}">
                {% csrf_token %}
                <li><button class="dropdown-item" type="submit" name="logout">Perfil</button></li>
            </form>
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <li><button class="dropdown-item" type="submit" name="logout">Cerrar sesión</button></li>
            </form>
        </ul>
</li>
{% endblock nav-activate %}

{% block body %}
<main class="container-main">
        <section class="container-functions">
            <div class="row justify-content-center align-items-center">
                <div class="col-md-3">
                    <li class="nav-item-filter dropdown">
                        <a class="nav-link-filter dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Categorias
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/comedor">Comedor</a></li>
                            <li><a class="dropdown-item " disabled>Cocina</a></li>
                            <li><a class="dropdown-item" href="/dormitorio">Dormitorio</a></li>
                        </ul>
                    </li>
                </div>
                <div class="col-md-3">
                    <li class="nav-item-filter dropdown">
                        <a class="nav-link-filter dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Productos
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Garcia</a></li>
                            <li><a class="dropdown-item" href="#">Liberty</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                </div>
                <div class="col-md-3">
                    <li class="nav-item-filter">
                        <a class="nav-link-filter-offers" href="#">Ofertas <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-percent" viewBox="0 0 16 16">
                            <path d="M13.442 2.558a.625.625 0 0 1 0 .884l-10 10a.625.625 0 1 1-.884-.884l10-10a.625.625 0 0 1 .884 0M4.5 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m7 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
                          </svg></a>
                    </li>
                </div>
                <div class="col-md-3">
                    <form class="d-flex search" role="search">
                        <input class="form-control me-0" type="search" placeholder="¡Qué deseas buscar!"
                            aria-label="Search">
                        <button class="btn-search" type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="20"
                                height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path
                                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                            </svg></button>
                    </form>
                </div>
            </div>
        </section>

        <section class="container-card">
            <div class="col-md-6 filter">
                <div id="filters" class="d-flex flex-column">
                    <h5 class="header-title">Filtrar Productos</h5>
                    <div class="filter-item">
                        <div class="filter-body">
                            <form>
                                <div class="form-group">
                                    <label for="minPrice">Precio mínimo:</label>
                                    <input type="number" class="form-control" id="minPrice"
                                        placeholder="Ingrese precio mínimo">
                                </div>
                                <div class="form-group">
                                    <label for="maxPrice">Precio máximo:</label>
                                    <input type="number" class="form-control" id="maxPrice"
                                        placeholder="Ingrese precio máximo">
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="filter-item">
                        <h2 class="filter-header-cat">Categoría</h2>
                        <div class="filter-body">
                            <ul class="list-group">
                                {% for m in mueb %}
                                <li class="list-group-item">
                                    <label class="form-check">
                                        <input class="form-check-input" type="checkbox" name="categoria" value="{{ m.id }}"> {{ m.nombre }}
                                    </label>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    
                    <button class="btn-filter" id="filter-prod">Filtrar</button>
                </div>
            </div>

            <div class="col-md-9 container-productos">
                {% for p in prod %}
                <button class="card" id="{{p.cod}}" data-categoria="{{p.categoria.nombre}}" data-precio="{{p.precio}}" data-url="{% url "ver_producto" p.cod %}">
                    <span class="card-stock" style="display:none;">Disponible: {{ p.stock }} </span>
                    <img src="{{ p.img.url }}" class="card-img-top" alt="{{ p.img.url }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ p.nombre }}</h5>
                        <p class="card-brand">{{ p.clasificacion}}</p>
                        <p class="card-price">$<span id="price-card">{{p.precio}}</span></p>
                        <div class="additional-info">
                            <p class="card-TipoM" style="display:none">Mueble: <span class="Type-card">{{p.categoria.mueble}}</span></p>
                            <p class="card-TipoM" style="display:none">Tipo de Mueble: <span class="Type-card">{{p.categoria.tipomueble}}</span></p>
                            <a id="btn-add-to-cart" class="btn-cart">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                                    class="bi bi-cart-plus" viewBox="0 0 16 16">
                                    <path
                                        d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9z" />
                                    <path
                                        d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </button>
                {% endfor %}
            </div>
        </section>

        <div class="pagination">
            {% if productos.has_previous %}
                <a href="?page={{ productos.previous_page_number }}" class="btn-pagination">Anterior <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                    <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0m3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
                  </svg></a>
            {% endif %}
        
            <span class="pagination-number" id="currentPage">Página {{ productos.number }} de {{ productos.paginator.num_pages }}</span>
        
            {% if productos.has_next %}
                <a href="?page={{ productos.next_page_number }}" class="btn-pagination">Siguiente <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                    <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                  </svg></a>
            {% endif %}
        </div>  
    </main>
{% endblock body %}